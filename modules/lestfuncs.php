<?php

function geo_lest($north, $east) {

$LAT = ($north*(pi()/180));
$LON = ($east*(pi()/180));
$a = 6378137.000000000000;
$F = 298.257222100883;
$RF = $F;
$F = (1/$F);
$B0 = ((57.000000000000 + 31.000000000000 / 60.000000000000 + 3.194148000000 / 3600.000000000000)*(pi()/180));
$L0 = ((24.000000000000)*(pi()/180));
$FN = 6375000.000000000000;
$FE = 500000.000000000000;
$B1 = ((59.000000000000 + 20.000000000000 / 60.000000000000)*(pi()/180));
$B2 = ((58.000000000000)*(pi()/180));
$xx = ($north - $FN);
$yy = ($east - $FE);
$f1 = (1 / $RF);
$er = ((2.000000000000 * $f1) - ($f1 * $f1));
$e = sqrt($er);
$t1 = sqrt(((1.000000000000 - sin($B1)) / (1.000000000000 + sin($B1))) * (pow(((1.000000000000 + $e * sin($B1)) / (1.000000000000 - $e * sin($B1))), $e)));
$t2 = sqrt(((1.000000000000 - sin($B2)) / (1.000000000000 + sin($B2))) * (pow(((1.000000000000 + $e * sin($B2)) / (1.000000000000 - $e * sin($B2))), $e)));
$t0 = sqrt(((1.000000000000 - sin($B0)) / (1.000000000000 + sin($B0))) * (pow(((1.000000000000 + $e * sin($B0)) / (1.000000000000 - $e * sin($B0))), $e)));
$t = sqrt(((1.000000000000 - sin($LAT)) / (1.000000000000 + sin($LAT))) * (pow(((1.000000000000 + $e * sin($LAT)) / (1.000000000000 - $e * sin($LAT))), $e)));

$m1 = (cos($B1) / (pow((1.000000000000 - $er * sin($B1) * sin($B1)), 0.500000000000)));
$m2 = (cos($B2) / (pow((1.000000000000 - $er * sin($B2) * sin($B2)), 0.500000000000)));
$n = ((log($m1) - log($m2)) / (log($t1) - log($t2)));
$FF = ($m1 / ($n * pow($t1, $n)));
$p0 = ($a * $FF * (pow($t0, $n)));
$FII = ($n * ($LON - $L0));
$p = ($a * $FF * pow($t, $n));
$n = ($p0 - ($p * cos($FII)) + $FN);
$e = ($p * sin($FII) + $FE);

return array($n,$e);


}


function lest_geo($x,$y) {


$a = 6378137.00000000000;
$F = 1/298.257222100883;
$ESQ = ($F + $F - $F * $F);
$B0 = ((57.00000000000 + 31.0000000000 / 60.000000000000 + 3.19414800000 / 3600.00000000000) / rad2deg(1));
$L0 = (24.00000000000 / rad2deg(1));
$FN = 6375000.00000000000;
$FE = 500000.00000000000;
$B2 = ((59.00000000000 + 20.00000000000 / 60.00000000000) / rad2deg(1));
$B1 = (58.00000000000 / rad2deg(1));
$xx = ($x - $FN);
$yy = ($y - $FE);
$t0 = sqrt((1.00000000000 - sin($B0)) / (1.00000000000 + sin($B0)) * pow(((1.00000000000 + sqrt($ESQ) * sin($B0)) / (1.00000000000 - sqrt($ESQ) * sin($B0))), sqrt($ESQ)));
$t1 = sqrt((1.00000000000 - sin($B1)) / (1.00000000000 + sin($B1)) * pow(((1.00000000000 + sqrt($ESQ) * sin($B1)) / (1.00000000000 - sqrt($ESQ) * sin($B1))), sqrt($ESQ)));
$t2 = sqrt((1.00000000000 - sin($B2)) / (1.00000000000 + sin($B2)) * pow(((1.00000000000 + sqrt($ESQ) * sin($B2)) / (1.00000000000 - sqrt($ESQ) * sin($B2))), sqrt($ESQ)));

$m1 = (cos($B1) / pow((1.00000000000 - $ESQ * sin($B1) * sin($B1)), 0.50000000000));
$m2 = (cos($B2) / pow((1.00000000000 - $ESQ * sin($B2) * sin($B2)), 0.50000000000));
$n1 = ((log($m1) - log($m2)) / (log($t1) - log($t2)));
$FF = ($m1 / ($n1 * pow($t1, $n1)));
$p0 = ($a * $FF * pow($t0, $n1));
$p = pow(($yy * $yy + ($p0 - $xx) * ($p0 - $xx)), 0.50000000000);
$t = pow(($p / ($a * $FF)), (1.00000000000 / $n1));
$FII = atan($yy / ($p0 - $xx));
$LON = ($FII / $n1 + $L0);
$u = ((pi() / 2.00000000000) - (2.00000000000 * atan($t)));
$LAT = ($u + ($ESQ / 2.00000000000 + (5.00000000000 * pow($ESQ, 2) / 24.00000000000) + (pow($ESQ, 3) / 12.00000000000) +
   (13.00000000000 * pow($ESQ, 4) / 360.00000000000)) * sin(2.00000000000 * $u) +
   ((7.00000000000 * pow($ESQ, 2) / 48.00000000000) + (29.00000000000 * pow($ESQ, 3) / 240.00000000000) +
   (811.00000000000 * pow($ESQ, 4) / 11520.00000000000)) * sin(4.00000000000 * $u) +
   ((7.00000000000 * pow($ESQ, 3) / 120.00000000000) + (81.00000000000 * pow($ESQ, 4) / 1120.00000000000)) * sin(6.00000000000 * $u) +
   (4279.00000000000 * pow($ESQ, 4) / 161280.00000000000) * sin(8.00000000000 * $u));
$LAT = rad2deg($LAT);
$LON = rad2deg($LON);
#LON = LON * rad2dedegrees(1);

return array($LAT,$LON);

}

